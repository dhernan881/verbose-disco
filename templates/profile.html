<!DOCTYPE html>
<head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
        var data = google.visualization.arrayToDataTable([
            ['Year', 'Sales', 'Expenses'],
            ['2004',  1000,      400],
            ['2005',  1170,      460],
            ['2006',  660,       1120],
            ['2007',  1030,      540]
        ]);

        // change curveType to 'function' to set it to be curvy
        var options = {
            title: 'Company Performance',
            curveType: 'none',
            legend: { position: 'bottom' }
        };

        var chart = new google.visualization.LineChart(document.getElementById('line_chart'));

        chart.draw(data, options);
        }
    </script>
</head>
<body>
    <h2>{{accountName}}</h2>
    <img alt="Profile pic" src={{accountProfilePicture}} width=64 height=64>
    <h2>Your Stats:</h2>
    {% if userTeam %}
        <p>K/D Ratio:
            {% if userKillDeath / favoriteKillDeath < 0.75 %}
                <span style="color:red">{{userKillDeath}}</span>
            {% elif userKillDeath / favoriteKillDeath > 1.25 %}
                <span style="color:green">{{userKillDeath}}</span>
            {% else %}
                <span>{{userKillDeath}}</span>
            {% endif %}
        </p>
        <p>Headshot Percent:
            {% if userHeadshotPercent / favoriteHeadshotPercent < 0.75 %}
                <span style="color:red">{{userHeadshotPercent}} %</span>
            {% elif userHeadshotPercent / favoriteHeadshotPercent > 1.25 %}
                <span style="color:green">{{userHeadshotPercent}} %</span>
            {% else %}
                <span>{{userHeadshotPercent}} %</span>
            {% endif %}
        </p>
        <p>Overall Win Rate:
            {% if userOverallWinPercent / favoriteWinPercent < 0.75 %}
                <span style="color:red">{{userOverallWinPercent}} %</span>
            {% elif userOverallWinPercent / favoriteWinPercent > 1.25 %}
                <span style="color:green">{{userOverallWinPercent}} %</span>
            {% else %}
                <span>{{userOverallWinPercent}} %</span>
            {% endif %}
        </p>
        <p>Last Match K/D Ratio:
            {% if userLastMatchKillDeath / favoriteLastMatchKillDeath < 0.75 %}
                <span style="color:red">{{userLastMatchKillDeath}}</span>
            {% elif userLastMatchKillDeath / favoriteLastMatchKillDeath > 1.25 %}
                <span style="color:green">{{userLastMatchKillDeath}}</span>
            {% else %}
                <span>{{userLastMatchKillDeath}}</span>
            {% endif %}
        </p>
        <p>Favorite Map: {{userFavoriteMap}}</p>
        <p>Favorite Map Win Rate:
            {% if userFavoriteMapWinRate / favoriteFavoriteMapWinPercent < 0.75 %}
                <span style="color:red">{{userLastMatchKillDeath}} %</span>
            {% elif userFavoriteMapWinRate / favoriteFavoriteMapWinPercent > 1.25 %}
                <span style="color:green">{{userLastMatchKillDeath}} %</span>
            {% else %}
                <span>{{userFavoriteMapWinRate}} %</span>
            {% endif %}
        </p>
    {% else %}
        <p>K/D Ratio: {{userKillDeath}}</p>
        <p>Headshot Percent: {{userHeadshotPercent}} %</p>
        <p>Overall Win Rate: {{userOverallWinPercent}} %</p>
        <p>Last Match K/D Ratio: {{userLastMatchKillDeath}}</p>
        <p>Favorite Map: {{userFavoriteMap}}</p>
        <p>Favorite Map Win Rate: {{userFavoriteMapWinRate}} %</p>
    {% endif %}
    <h2>Your Favorite Player:</h2>
    <p>{{userTeam}}</p>
    {% if userTeam %}
        <h3>{{userTeam}}'s Stats:</h3>
        <p>K/D Ratio: {{favoriteKillDeath}}</p>
        <p>Headshot Percent: {{favoriteHeadshotPercent}} %</p>
        <p>Overall Win Rate: {{favoriteWinPercent}} %</p>
        <p>Last Match K/D Ratio: {{favoriteLastMatchKillDeath}}</p>
        <p>{{userFavoriteMap}} Win Rate: {{favoriteFavoriteMapWinPercent}} %</p>
    {% endif %}
    <br>

    <div id="line_chart" style="width: 900px; height: 500px"></div>

    <p>Search for another player below!</p>
    <form method="POST">
        <input name="search">
    </form>
    {% if searchName %}
        <h3>{{searchName}}'s Stats:</h3>
        <p>K/D Ratio: {{searchKillDeathRatio}}</p>
        <p>Headshot Percent: {{searchHeadshotPercent}} %</p>
        <p>Overall Win Percent: {{searchWinPercent}} %</p>
        <p>Last Match K/D Ratio: {{searchLastMatchKillDeathRatio}}</p>
        <p>{{userFavoriteMap}} Win Rate: {{searchFavoriteMapWinPercent}} %</p>
        <form method="POST">
            <input type="hidden" name="searchName" id="searchName" value={{searchName}}>
            <input type="submit" value="Set as favorite player?">
        </form>
    {% elif searchResults %}
        <p>{{searchResults}}</p>
    {% endif %}

{% if lowest1 %}
    <h2>Want to be as good as {{userTeam}}? We've identified these three areas for your improvement:</h2>
    <p>
        <span><a href="/{{lowest1}}/{{steamID}}">{{lowest1}}</a>, </span>
        <span><a href="/{{lowest2}}/{{steamID}}">{{lowest2}}</a>, </span>
        <span><a href="/{{lowest3}}/{{steamID}}">{{lowest3}}</a></span>
    </p>
{% endif %}
<br>
<h3><a href="/recommendations/{{steamID}}">View our full list of recommendations here!</a></h3>
</body>